{"ast":null,"code":"import jwt_decode from 'jwt-decode';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"myForm\"];\nexport class LoginComponent {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n  }\n  getDecodedAccessToken(token) {\n    try {\n      return jwt_decode(token);\n    } catch (Error) {\n      return null;\n    }\n  }\n  onSubmit() {\n    this.http.post('http://127.0.0.1:8000/api/login', {\n      email: this.form.value.email,\n      password: this.form.value.password\n    }).subscribe({\n      next: response => {\n        const tokenInfo = this.getDecodedAccessToken(response.token); // decode token\n        console.log(tokenInfo);\n        localStorage.setItem('id', tokenInfo.user_id);\n        this.router.navigate(['/']);\n      },\n      error: error => {\n        console.log(error);\n        this.router.navigate(['/login']);\n        ;\n      }\n    });\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  viewQuery: function LoginComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.form = _t.first);\n    }\n  },\n  decls: 16,\n  vars: 0,\n  consts: [[3, \"ngSubmit\"], [\"myForm\", \"ngForm\"], [1, \"container\"], [2, \"text-align\", \"center\"], [\"type\", \"text\", \"placeholder\", \"Enter email\", \"name\", \"email\", \"required\", \"\", \"ngModel\", \"\"], [\"type\", \"password\", \"placeholder\", \"Enter password\", \"name\", \"password\", \"required\", \"\", \"ngModel\", \"\"], [\"type\", \"submit\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelement(2, \"br\");\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"h2\", 3);\n      i0.ɵɵtext(5, \"Login Form\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"label\")(7, \"b\");\n      i0.ɵɵtext(8, \"Email\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(9, \"input\", 4);\n      i0.ɵɵelementStart(10, \"label\")(11, \"b\");\n      i0.ɵɵtext(12, \"Password\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(13, \"input\", 5);\n      i0.ɵɵelementStart(14, \"button\", 6);\n      i0.ɵɵtext(15, \"Login\");\n      i0.ɵɵelementEnd()()();\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n  styles: [\"body[_ngcontent-%COMP%] {font-family: Arial, Helvetica, sans-serif;}\\r\\nform[_ngcontent-%COMP%] {border: 3px solid #f1f1f1;}\\r\\n\\r\\ninput[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 12px 20px;\\r\\n  margin: 8px 0;\\r\\n  display: inline-block;\\r\\n  border: 1px solid #ccc;\\r\\n  box-sizing: border-box;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n  background-color: #04AA6D;\\r\\n  color: white;\\r\\n  padding: 14px 20px;\\r\\n  margin: 8px 0;\\r\\n  border: none;\\r\\n  cursor: pointer;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%]:hover {\\r\\n  opacity: 0.8;\\r\\n}\\r\\n\\r\\n.cancelbtn[_ngcontent-%COMP%] {\\r\\n  width: auto;\\r\\n  padding: 10px 18px;\\r\\n  background-color: #f44336;\\r\\n}\\r\\n\\r\\n.imgcontainer[_ngcontent-%COMP%] {\\r\\n  text-align: center;\\r\\n  margin: 24px 0 12px 0;\\r\\n\\r\\n}\\r\\n\\r\\nimg.avatar[_ngcontent-%COMP%] {\\r\\n  width: 40%;\\r\\n  border-radius: 50%;\\r\\n}\\r\\n\\r\\n.container[_ngcontent-%COMP%] {\\r\\n  padding: 16px;\\r\\n  height:400px; width:800px;\\r\\n  border-radius: 20px;\\r\\n  box-shadow: 0 10px 38px rgba(0,0,0,0.25),\\r\\n\\t\\t0 10px 10px rgba(0,0,0,0.22);\\r\\n}\\r\\n\\r\\nspan.psw[_ngcontent-%COMP%] {\\r\\n  float: right;\\r\\n  padding-top: 16px;\\r\\n}\\r\\n\\r\\n\\r\\n@media screen and (max-width: 300px) {\\r\\n  span.psw[_ngcontent-%COMP%] {\\r\\n     display: block;\\r\\n     float: none;\\r\\n  }\\r\\n  .cancelbtn[_ngcontent-%COMP%] {\\r\\n     width: 100%;\\r\\n  }\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLHlDQUF5QyxDQUFDO0FBQ2hELE1BQU0seUJBQXlCLENBQUM7O0FBRWhDO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IscUJBQXFCO0VBQ3JCLHNCQUFzQjtFQUN0QixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsWUFBWTtFQUNaLGVBQWU7RUFDZixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixxQkFBcUI7O0FBRXZCOztBQUVBO0VBQ0UsVUFBVTtFQUNWLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixZQUFZLEVBQUUsV0FBVztFQUN6QixtQkFBbUI7RUFDbkI7OEJBQzRCO0FBQzlCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGlCQUFpQjtBQUNuQjs7QUFFQSxvRUFBb0U7QUFDcEU7RUFDRTtLQUNHLGNBQWM7S0FDZCxXQUFXO0VBQ2Q7RUFDQTtLQUNHLFdBQVc7RUFDZDtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiYm9keSB7Zm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7fVxyXG5mb3JtIHtib3JkZXI6IDNweCBzb2xpZCAjZjFmMWYxO31cclxuXHJcbmlucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBwYWRkaW5nOiAxMnB4IDIwcHg7XHJcbiAgbWFyZ2luOiA4cHggMDtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG5idXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwNEFBNkQ7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDE0cHggMjBweDtcclxuICBtYXJnaW46IDhweCAwO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbmJ1dHRvbjpob3ZlciB7XHJcbiAgb3BhY2l0eTogMC44O1xyXG59XHJcblxyXG4uY2FuY2VsYnRuIHtcclxuICB3aWR0aDogYXV0bztcclxuICBwYWRkaW5nOiAxMHB4IDE4cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y0NDMzNjtcclxufVxyXG5cclxuLmltZ2NvbnRhaW5lciB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbjogMjRweCAwIDEycHggMDtcclxuXHJcbn1cclxuXHJcbmltZy5hdmF0YXIge1xyXG4gIHdpZHRoOiA0MCU7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG59XHJcblxyXG4uY29udGFpbmVyIHtcclxuICBwYWRkaW5nOiAxNnB4O1xyXG4gIGhlaWdodDo0MDBweDsgd2lkdGg6ODAwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcclxuICBib3gtc2hhZG93OiAwIDEwcHggMzhweCByZ2JhKDAsMCwwLDAuMjUpLFxyXG5cdFx0MCAxMHB4IDEwcHggcmdiYSgwLDAsMCwwLjIyKTtcclxufVxyXG5cclxuc3Bhbi5wc3cge1xyXG4gIGZsb2F0OiByaWdodDtcclxuICBwYWRkaW5nLXRvcDogMTZweDtcclxufVxyXG5cclxuLyogQ2hhbmdlIHN0eWxlcyBmb3Igc3BhbiBhbmQgY2FuY2VsIGJ1dHRvbiBvbiBleHRyYSBzbWFsbCBzY3JlZW5zICovXHJcbkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDMwMHB4KSB7XHJcbiAgc3Bhbi5wc3cge1xyXG4gICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgIGZsb2F0OiBub25lO1xyXG4gIH1cclxuICAuY2FuY2VsYnRuIHtcclxuICAgICB3aWR0aDogMTAwJTtcclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AAIA,OAAOA,UAAU,MAAM,YAAY;;;;;;AAOnC,OAAM,MAAOC,cAAc;EAGzBC,YAAoBC,IAAgB,EAAUC,MAAc;IAAxC,SAAI,GAAJD,IAAI;IAAsB,WAAM,GAANC,MAAM;EACpD;EACAC,qBAAqB,CAACC,KAAa;IACjC,IAAI;MACF,OAAON,UAAU,CAACM,KAAK,CAAC;KACzB,CAAC,OAAOC,KAAK,EAAE;MACd,OAAO,IAAI;;EAEf;EACAC,QAAQ;IACN,IAAI,CAACL,IAAI,CAACM,IAAI,CAAC,iCAAiC,EAAE;MAChDC,KAAK,EAAE,IAAI,CAACC,IAAI,CAACC,KAAK,CAACF,KAAK;MAC5BG,QAAQ,EAAE,IAAI,CAACF,IAAI,CAACC,KAAK,CAACC;KAC3B,CAAC,CAACC,SAAS,CAAC;MACXC,IAAI,EAAGC,QAAa,IAAI;QACtB,MAAMC,SAAS,GAAG,IAAI,CAACZ,qBAAqB,CAACW,QAAQ,CAACV,KAAK,CAAC,CAAC,CAAC;QAC9DY,OAAO,CAACC,GAAG,CAACF,SAAS,CAAC;QACtBG,YAAY,CAACC,OAAO,CAAC,IAAI,EAAEJ,SAAS,CAACK,OAAO,CAAC;QAC7C,IAAI,CAAClB,MAAM,CAACmB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;MAC7B,CAAC;MACDC,KAAK,EAAGA,KAAK,IAAI;QACfN,OAAO,CAACC,GAAG,CAACK,KAAK,CAAC;QAClB,IAAI,CAACpB,MAAM,CAACmB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;QAChC;MACF;KACD,CAAC;EACJ;;AA7BWtB,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAwB;EAAAC;IAAA;;;;;;;;;;;;;MCX3BC,kCAA+C;MAAzCA;QAAA,OAAYC,cAAU;MAAA,EAAC;MAC3BD,qBAAI;MACJA,8BAAuB;MACUA,0BAAU;MAAAA,iBAAK;MAC9CA,6BAAO;MAAGA,qBAAK;MAAAA,iBAAI;MACnBA,2BAA2E;MAC3EA,8BAAO;MAAGA,yBAAQ;MAAAA,iBAAI;MACtBA,4BAAqF;MACrFA,kCAAsB;MAAAA,sBAAK;MAAAA,iBAAS","names":["jwt_decode","LoginComponent","constructor","http","router","getDecodedAccessToken","token","Error","onSubmit","post","email","form","value","password","subscribe","next","response","tokenInfo","console","log","localStorage","setItem","user_id","navigate","error","selectors","viewQuery","i0","ctx"],"sourceRoot":"","sources":["C:\\laragon\\www\\integ-socialmedia\\frontend\\socialmedia\\src\\app\\pages\\login\\login.component.ts","C:\\laragon\\www\\integ-socialmedia\\frontend\\socialmedia\\src\\app\\pages\\login\\login.component.html"],"sourcesContent":["import { Component, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Router } from '@angular/router';\r\nimport jwt_decode from 'jwt-decode';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent {\r\n  @ViewChild(\"myForm\")\r\n  form!: NgForm;\r\n  constructor(private http: HttpClient, private router: Router) {\r\n  }\r\n  getDecodedAccessToken(token: string): any {\r\n    try {\r\n      return jwt_decode(token);\r\n    } catch (Error) {\r\n      return null;\r\n    }\r\n  }\r\n  onSubmit() {\r\n    this.http.post('http://127.0.0.1:8000/api/login', {\r\n      email: this.form.value.email,\r\n      password: this.form.value.password,\r\n    }).subscribe({\r\n      next: (response: any) => {\r\n        const tokenInfo = this.getDecodedAccessToken(response.token); // decode token\r\n        console.log(tokenInfo);\r\n        localStorage.setItem('id', tokenInfo.user_id);\r\n        this.router.navigate(['/']);\r\n      },\r\n      error: (error) => {\r\n        console.log(error)\r\n        this.router.navigate(['/login']);\r\n        ;\r\n      },\r\n    });\r\n  }\r\n}\r\n","<form (ngSubmit)=\"onSubmit()\" #myForm=\"ngForm\">\r\n  <br>\r\n  <div class=\"container\">\r\n    <h2 style=\"text-align: center\">Login Form</h2>\r\n    <label><b>Email</b></label>\r\n    <input type=\"text\" placeholder=\"Enter email\" name=\"email\" required ngModel>\r\n    <label><b>Password</b></label>\r\n    <input type=\"password\" placeholder=\"Enter password\" name=\"password\" required ngModel>\r\n    <button type=\"submit\">Login</button>\r\n  </div>\r\n</form>\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}